"undefined"===typeof LimelightPlayerUtil&&("undefined"===typeof JSON&&(this.JSON={},function(){function z(c){return 10>c?"0"+c:c}function D(c){A.lastIndex=0;return A.test(c)?'"'+c.replace(A,function(c){var g=F[c];return"string"===typeof g?g:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function B(c,u){var g,l,t,n,p=m,r,h=u[c];h&&("object"===typeof h&&"function"===typeof h.toJSON)&&(h=h.toJSON(c));"function"===typeof v&&(h=v.call(u,c,h));switch(typeof h){case "string":return D(h);
case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);case "object":if(!h)return"null";m+=w;r=[];if("[object Array]"===Object.prototype.toString.apply(h)){n=h.length;for(g=0;g<n;g+=1)r[g]=B(g,h)||"null";t=0===r.length?"[]":m?"[\n"+m+r.join(",\n"+m)+"\n"+p+"]":"["+r.join(",")+"]";m=p;return t}if(v&&"object"===typeof v)for(n=v.length,g=0;g<n;g+=1)l=v[g],"string"===typeof l&&(t=B(l,h))&&r.push(D(l)+(m?": ":":")+t);else for(l in h)Object.hasOwnProperty.call(h,l)&&
(t=B(l,h))&&r.push(D(l)+(m?": ":":")+t);t=0===r.length?"{}":m?"{\n"+m+r.join(",\n"+m)+"\n"+p+"}":"{"+r.join(",")+"}";m=p;return t}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+z(this.getUTCMonth()+1)+"-"+z(this.getUTCDate())+"T"+z(this.getUTCHours())+":"+z(this.getUTCMinutes())+":"+z(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});
var C=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,A=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m,w,F={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},v;"function"!==typeof JSON.stringify&&(JSON.stringify=function(c,u,g){var l;w=m="";if("number"===typeof g)for(l=0;l<g;l+=1)w+=" ";else"string"===typeof g&&(w=g);if((v=u)&&"function"!==
typeof u&&("object"!==typeof u||"number"!==typeof u.length))throw Error("JSON.stringify");return B("",{"":c})});"function"!==typeof JSON.parse&&(JSON.parse=function(c,m){function g(c,l){var p,r,h=c[l];if(h&&"object"===typeof h)for(p in h)Object.hasOwnProperty.call(h,p)&&(r=g(h,p),void 0!==r?h[p]=r:delete h[p]);return m.call(c,l,h)}var l;c=String(c);C.lastIndex=0;C.test(c)&&(c=c.replace(C,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return l=eval("("+c+")"),"function"===typeof m?g({"":l},""):l;throw new SyntaxError("JSON.parse");})}()),LimelightPlayerUtil=function(){function z(a,b,f,q,d){r(a,function(e){var G={service:{}};a.playlistService&&(G.service.playlistService=a.playlistService);a.metricsCollectionService&&(G.service.metricsCollectionService=a.metricsCollectionService);a.cuePointService&&(G.service.cuePointService=
a.cuePointService);return DelvePlayer=e=e.createPlayer(b,f,q,d,G)})}function D(a,b,f,q){f.postStartSessionEvent();w(a,b,t,f,function(a,e){var b=e.mediaList[0],c=document.createElement("TABLE");c.style="border-style:none";var h=c.appendChild(document.createElement("TR")).appendChild(document.createElement("TD")).appendChild(document.createElement("A"));h.href="#";h.appendChild(document.createElement("IMG")).src=encodeURI(b.thumbnailImageUrl);var k=c.appendChild(document.createElement("TR")).appendChild(document.createElement("TD"));
k.style="text-align:center";k=k.appendChild(document.createElement("A"));k.href="#";k.appendChild(document.createTextNode("Click to play"));var s=function(){f.postPlayStateEvent(x.PLAY,0,function(){window.location=b.mobileUrls[0].mobileUrl});return!1};h.onclick=s;k.onclick=s;q(c)})}function B(a,b,f,q,d,e){w(a,q,p.htmlCodec,d,function(a,q){d.postStartSessionEvent();var c=q.mediaList[0],k=document.createElement("VIDEO");k.src=encodeURI(c.mobileUrls[0].mobileUrl);k.width=b;k.height=f;k.poster=encodeURI(c.previewImageUrl);
k.controls=!0;k.addEventListener("click",k.play);k.addEventListener("play",function(){d.postPlayStateEvent(x.PLAY,Math.round(1E3*k.currentTime));d.startHeartbeat({quality:a,getPosition:function(){return Math.round(1E3*k.currentTime)},isPlaying:function(){return!k.paused}})});k.addEventListener("pause",function(){k.ended||d.postPlayStateEvent(x.PAUSE,Math.round(1E3*k.currentTime));d.stopHeartbeat()});k.addEventListener("ended",function(){d.postEvent(x.MEDIA_COMPLETE);d.stopHeartbeat()});var s=0;k.addEventListener("timeupdate",
function(){var a=k.currentTime;if(k.seeking&&a!==s){var e=Math.round(1E3*s),b=Math.round(1E3*a);e!==b&&d.postEvent(x.SEEK,{offsetBefore:e,offsetAfter:b,heatmapDisplayed:!1,spectrumType:"",spectrumColor:0,relatedConcepts:""})}s=a});e(k)})}function C(a){a=a||{};a.wmode=a.wmode||"window";a.id=a.id||"limelight_player_"+Math.floor(1E9*Math.random());a.resources=a.resources||{};a.resources.playlistService=a.resources.playlistService||v;a.resources.metricsCollectionService=a.resources.metricsCollectionService||
c;a.resources.cuePointService=a.resources.cuePointService||u;a.resources.htmlPlayerLocation=a.resources.htmlPlayerLocation||p.loadingProtocol+g;a.resources.playerIframeLocation=a.resources.playerIframeLocation||p.loadingProtocol+l;return a}function A(a,b,f,q,d,e,c,g,J){var k=x.create(b.metricsCollectionService,q,J);switch(J){case "iframe":return h(b,c,d,e,q,k,a);case "html":return z(b,c,d,e,null!==f?f:q);case "video":B(b,d,e,q,k,a);break;case "link":D(b,q,k,a);break;case "install-flash":p.Flash.canUpgrade?
(b=!0===p.Flash.isActiveX?"ActiveX":"PlugIn",document.title=document.title.slice(0,47)+" - Flash Player Installation",m(a,"http://assets.delvenetworks.com/player/playerProductInstall.swf","MMredirectURL="+window.location+"&MMplayerType="+b+"&MMdoctitle="+document.title,d,e,c,g)):a('<table width="'+d+'" height="'+e+'" bgcolor="black" style="background-color:black; margin-left:auto; margin-right:auto"><tr><td align="center" style="text-align:center; vertical-align:middle"><a href="http://www.adobe.com/go/getflash/" style="text-decoration:underline; color:white"><span style="font-size:12px; color:white">You need to have the latest version of Adobe Flash Player to view this content.<br/>Please click here to continue.</span></a></td></tr></table>')}return null}
function m(a,b,f,q,d,e,c){var h="",g;if("string"===typeof f)h=f;else if("object"===typeof f)for(g in f)h+=encodeURIComponent(g)+"="+encodeURIComponent(f[g])+"&";a('<object type="application/x-shockwave-flash" id="'+e+'" name="'+e+'" width="'+q+'" height="'+d+'" data="'+b+'"><param name="movie" value="'+b+'"/><param name="wmode" value="'+c+'"/><param name="allowScriptAccess" value="always"/><param name="allowFullScreen" value="true"/><param name="flashVars" value="'+h+'"/></object>');return document.getElementById(e)}
function w(a,b,f,q,d){var e;b.mediaId?e=a.playlistService+"/media/"+b.mediaId+"/getMobilePlaylistByMediaId?platform="+f:b.channelId?e=a.playlistService+"/channel/"+b.channelId+"/getFirstAvailableMobilePlaylistByChannelId?platform="+f:b.channelListId&&(e=a.playlistService+"/channel_list/"+b.channelListId+"/getFirstAvailableMobilePlaylistByChannelListId?platform="+f);M(e,function(a){a&&a.mediaList&&a.mediaList[0]?(a.id&&q.setChannelId(a.id),a.mediaList[0].mediaId&&q.setMediaId(a.mediaList[0].mediaId),
0<a.mediaList[0].mobileUrls.length?d(f,a):showError("Video Not Available For This Device")):showError("Video Not Available")})}function F(a){function b(a){return("object"===typeof a||"function"===typeof a)&&a.nodeType}if("undefined"===typeof a)return function(a){b(a)?document.body.appendChild(a):document.write(a)};"string"===typeof a&&(a=document.getElementById(a));if(b(a)){if("OBJECT"===a.nodeName){var f=a.parentNode,q=a.nextSibling,d=!1;return function(e){var c=document.createElement("DIV");b(e)?
c.appendChild(e):c.innerHTML=e;d||(f.replaceChild(c.firstChild,a),d=!0);for(;c.firstChild;)f.insertBefore(c.firstChild,q)}}return function(e){b(e)?a.appendChild(e):a.innerHTML+=e}}return null}var v="http://production.ps.delve.cust.lldns.net/r/PlaylistService",c="http://mcs.delve.cust.lldns.net/r/MetricsCollectionService",u="http://cps.lvp.llnw.net/r/CuePointService",g="//videoplatform.limelight.com/player/html-player.js",l="//assets.delvenetworks.com/player/resources/iframe.html",t="Mobile3gp",n=
navigator,p=function(){var a=n.userAgent.toLowerCase(),b=n.platform.toLowerCase(),f=/msie/.test(a),c=/msie\s\d\d/.test(a),d=/linux/.test(b?b:a),b=/android \d+\x2E\d+/.test(a),e=/android [2-9]+\x2E\d+/.test(a),h=/ipad/.test(a),g=/iphone|ipad|ipod/.test(a),l=/silk/.test(a),k=/blackberry/.test(a),s=/symbian|series60/.test(a),E=/opera mobi|opera tablet/.test(a),H=/fennec/.test(a);/playbook/.test(a);var p=/nintendo wiiu/.test(a),m=/mobile/.test(a)||b,k=b||g||l||k||s||E||H||p||m,s=[0,0,0];if(g&&(a=a.match(/os (.*) like mac os x/))&&
1<a.length){var s=[],a=a[1].split("_"),y;for(y in a)s.push(parseInt(a[y]));for(;3>s.length;)s.push(0)}y=function(){var a=document.createElement("VIDEO");return a.canPlayType?a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'):""}();H=(e||l||g)&&!H;e=function(){var a=document.createElement("VIDEO");return a.canPlayType?a.canPlayType("application/vnd.apple.mpegurl"):""}();l="probably"===e||g?"HttpLiveStreaming":"MobileH264";a=function(){var a=function(){var a=null;if("undefined"!==typeof n.plugins&&
"object"==typeof n.plugins["Shockwave Flash"]){if((a=n.plugins["Shockwave Flash"].description)&&("undefined"===typeof n.mimeTypes||!n.mimeTypes["application/x-shockwave-flash"]||n.mimeTypes["application/x-shockwave-flash"].enabledPlugin))return a=a.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),[parseInt(a.replace(/^(.*)\..*$/,"$1"),10),parseInt(a.replace(/^.*\.(.*)\s.*$/,"$1"),10),/[a-zA-Z]/.test(a)?parseInt(a.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0]}else if("undefined"!==typeof window.ActiveXObject)try{var b=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(b&&(a=b.GetVariable("$version")))return a=a.split(" ")[1].split(","),[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)]}catch(e){}return[0,0,0]}();return function(b,e,c){return a[0]>b||a[0]==b&&(a[1]>e||a[1]==e&&a[2]>=c)}}();f={canUpgrade:!d&&a(6,0,65),H264:a(9,0,115),hasAdaptiveStreaming:a(10,0,0),isActiveX:f};b=f.H264&&!b?"flash":k?"probably"===y||H?E||g&&!h&&5>s[0]?"video":"html":"link":"install-flash";"install-flash"===b&&(c&&"assets.delvenetworks.com"!==
window.location.host)&&(b="iframe");return{Metrics:{H264:y,HLS:e},embedMode:b,htmlCodec:l,Flash:f,loadingProtocol:"https:"===document.location.protocol?"https:":"http:"}}(),r=function(){var a=[];return function(b,c){if(void 0!==LimelightPlayerUtil.Player)c(LimelightPlayerUtil.Player);else if(a.push(c),void 0===LimelightPlayerUtil.playerLoadedCallback){var q=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("SCRIPT");d.type="text/javascript";d.src=b.htmlPlayerLocation;
d.charset="utf-8";LimelightPlayerUtil.playerLoadedCallback=function(b){LimelightPlayerUtil.Player=b;delete LimelightPlayerUtil.playerLoadedCallback;q&&q.removeChild(d);a.forEach(function(a){a(b)});a=[]};d.onerror=function(){a.forEach(function(a){a(null)});a=[]};q.insertBefore(d,q.firstChild)}}}(),h=function(){var a=[];return function(b,c,q,d,e,h,g){function l(a){var b={},e;for(e in a)b[e]="object"===typeof a[e]&&a[e]?l(a[e]):a[e];return b}var k=document.createElement("IFRAME");k.id=c;k.width=q;k.height=
d;k.src=b.playerIframeLocation;k.style.border="none";g(k);var s=document.getElementById(c).contentWindow,E={},p={},m={},r=0,y={},K=0,n=1,t=null,I=null,L=void 0;window.addEventListener("message",function(c){var d,f=c.data.state;f&&(f.channelList&&(E=f.channelList),f.channel&&(p=f.channel),f.media&&(m=f.media),f.index&&(r=f.index),f.playState&&(y=f.playState),f.position&&(K=f.position),f.volume&&(n=f.volume),f.quality&&(t=f.quality),f.actualQuality&&(I=f.actualQuality),f.customEvents&&(L=f.customEvents));
switch(c.data.type){case "event":"function"===typeof delvePlayerCallback&&delvePlayerCallback(c.data.id,c.data.eventName,c.data.data);break;case "init":s.postMessage({type:"init",embed:"../embed.js",flashVars:e,resourceLocations:b},"*");break;case "api":d={};for(var q in c.data.funcs){var f=c.data.funcs[q],h=function(a){return function(){s.postMessage({type:"func",name:a,args:Array.prototype.slice.call(arguments)},"*")}}(f);d[f]=h}d.registerPlayer=function(){};d.getPlayers=function(){return a};d.doGetActualQuality=
function(){return I?I.name:null};d.doGetQuality=function(){return t?t.name:null};d.doGetQualityDetails=function(){return l({actual:I,selected:t})};d.doGetCurrentIndex=function(){return r};d.doGetCurrentMedia=function(){return l(m)};d.doGetCurrentChannel=function(){return l(p)};d.doGetCurrentChannelList=function(){return l(E)};d.doGetCurrentPlayState=function(){return l(y)};d.doGetCustomEvents=function(){return l(L)};d.doGetPlayheadPositionInMilliseconds=function(){return K};d.doSetVolume=function(){var a=
d.doSetVolume;return function(b){b||(b=0);if("number"===typeof b)return 0>b&&(b=0),1<b&&(b=1),n=b,a(b)}}();d.doGetVolume=function(){return n};delete d.doGetChannels;delete d.doGetChannelMedia;d.getPlayer=function(){return d};d.getPlayerNodeByIdOrName=function(a){var b=document.getElementById(a);return b&&b.doPlay?b:(a=document.getElementsByName(a))&&null!=a.length?a[0]:null};DelvePlayer=d;for(var g in d)k[g]=d[g];a.push(d)}})}}(),x=function(){function a(a){var b=document.cookie.indexOf(a+"="),d=b+
a.length+1;if(!b&&a!=document.cookie.substring(0,a.length)||-1==b)return null;a=document.cookie.indexOf(";",d);-1==a&&(a=document.cookie.length);return unescape(document.cookie.substring(d,a))}function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)}).toUpperCase()}function f(a,b){if(void 0!==a){var d=!1;return function(){d||(d=!0,a.apply(b||this,arguments))}}}var c=b(),d={H264:p.Metrics.H264,HLS:p.Metrics.HLS},
e=n.userAgent,h=n.platform,g=function(){var d=a("Limelight_Embed_Code_UserId");return function(){if(!d){var a=d=b(),e=365,c=new Date;c.setTime(c.getTime());e&&(e*=864E5);c=new Date(c.getTime()+e);document.cookie="Limelight_Embed_Code_UserId="+escape(a)+(e?";expires="+c.toGMTString():"")+""}return d}}(),l=function(){var a=+new Date;return function(){return new Date-a}}(),k=function(){var a=0;return function(b,d,e){var c="_limelight_embed_ajax_"+a++,f=document.createElement("IFRAME");f.id=c;f.name=
c;f.style.cssText="display:none;width:0px;height:0px;";(document.getElementsByTagName("body")[0]||document.documentElement).appendChild(f);var k=document.createElement("FORM");k.setAttribute("target",c);k.setAttribute("method","POST");k.setAttribute("action",b);for(field in d)b=document.createElement("INPUT"),b.setAttribute("type","hidden"),b.setAttribute("name",field),b.setAttribute("value",JSON.stringify(d[field])),k.appendChild(b);f.appendChild(k);f.onload=function(){void 0!==e&&e();setTimeout(function(){f.parentNode.removeChild(f)},
0)};k.submit()}}();return{HEARTBEAT:"Heartbeat",MEDIA_COMPLETE:"MediaComplete",PLAY:"Play",PAUSE:"Pause",SEEK:"Seek",START_SESSION:"StartSession",create:function(a,b,p){var m={},n=null;d.embedMode=p;var r={postEvent:function(d,e,f){var h={channelListId:m.channelListId||b.channelListId,channelId:m.channelId||b.channelId,mediaId:m.mediaId||b.mediaId,millisecondsElapsed:l()},g;for(g in h)void 0===h[g]&&(h[g]="");for(g in e)h[g]=void 0===e[g]?"":e[g];k(a+"/recordMetricsEvent",{sourceInstanceId:c,source:"Limelight Embed Code",
sourceVersion:1,eventType:d,data:h},f)},postStartSessionEvent:function(){this.postEvent(x.START_SESSION,{adConfigurationChannelId:b.adConfigurationChannelId,htmlCapabilities:JSON.stringify(d),pageURL:window.location.href,platform:h,playerProviderId:"Delve Networks",userAgent:e,userId:g(),version:"1.5.3"})},postPlayStateEvent:function(a,b,d){var e=f(d);this.postEvent(a,{positionInMilliseconds:b},e);void 0!==d&&setTimeout(e,1E3)},setChannelListId:function(a){m.channelListId=a},setChannelId:function(a){m.channelId=
a},setMediaId:function(a){m.mediaId=a},startHeartbeat:function(a){null!==n&&clearInterval(n);n=setInterval(function(){a.isPlaying()&&r.postEvent(x.HEARTBEAT,{droppedFrames:0,droppedFramesRatio:"",selectedMediaQuality:a.quality,positionInMilliseconds:a.getPosition(),maxBytesPerSecond:"",currentBitrate:""})},3E4)},stopHeartbeat:function(){null!==n&&clearInterval(n);n=null}};return r}}}(),M=function(){var a=0;return function(b,f){var c="_"+a++;b+="&jsonp=LimelightPlayerUtil.jsonpCallback."+c;var d=document.getElementsByTagName("head")[0]||
document.documentElement,e=document.createElement("SCRIPT");e.type="text/javascript";e.src=b;e.charset="utf-8";LimelightPlayerUtil.jsonpCallback[c]=function(a){delete LimelightPlayerUtil.jsonpCallback[c];f(a);d&&d.removeChild(e)};e.onerror=function(){f(null)};d.insertBefore(e,d.firstChild)}}();return{jsonpCallback:[],initEmbed:function(a,b){b=b||{};var c=document.getElementById(a);if(null===c)return console&&(console.error&&"function"===typeof console.error)&&console.error("No such element: "+a),
null;var h=c.width,d=c.height,e=c.firstChild;b.id=a;for(var g="",l={};null!==e;){if("PARAM"===e.nodeName)switch(e.name){case "flashVars":for(var g=e.value,l={},m=g.split("&"),k=0;k<m.length;k++){var n=m[k],r=n.indexOf("=");-1===r?l[decodeURIComponent(n)]="true":l[decodeURIComponent(n.substring(0,r))]=decodeURIComponent(n.substring(r+1))}break;case "wmode":b.wmode=e.value}e=e.nextSibling}b=C(b);e=b.embedMode||p.embedMode;return"flash"!==e?(c=F(c),A(c,b.resources,g,l,h,d,b.id,b.wmode,e)):c},embedPlayer:function(a,
b,c,g,d){d=F(d);g=C(g);var e=g.embedMode||p.embedMode;return"flash"===e?m(d,p.loadingProtocol+(p.Flash.hasAdaptiveStreaming?"//assets.delvenetworks.com/player/fp10loader.swf":"//assets.delvenetworks.com/player/fp9loader.swf"),a,b,c,g.id,g.wmode):A(d,g.resources,null,a,b,c,g.id,g.wmode,e)}}}());
